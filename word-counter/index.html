<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WordFlow — Free Advanced Text Analyzer &amp; Word Counter Online</title>
    <meta name="description" content="Free online word counter and text analyzer. Count words, characters, sentences, paragraphs. Get reading time, keyword density, readability scores and more.">
    <meta name="keywords" content="free word counter online, character counter, text analyzer, reading time calculator, keyword density, readability score">
    <link rel="canonical" href="https://christian140903-sudo.github.io/devtoolkit/word-counter/">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="WordFlow — Free Advanced Text Analyzer &amp; Word Counter">
    <meta property="og:description" content="Count words, characters, sentences. Get reading time, keyword density, and readability scores instantly.">
    <meta property="og:url" content="https://christian140903-sudo.github.io/devtoolkit/word-counter/">
    <meta property="og:site_name" content="NexTool DevToolkit">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="WordFlow — Free Advanced Text Analyzer">
    <meta name="twitter:description" content="Count words, characters, sentences. Get reading time, keyword density, and readability scores instantly.">

    <!-- Schema.org -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "WordFlow — Advanced Text Analyzer",
        "description": "Free online word counter and text analyzer with reading time, keyword density, and readability scores.",
        "url": "https://christian140903-sudo.github.io/devtoolkit/word-counter/",
        "applicationCategory": "UtilityApplication",
        "operatingSystem": "Any",
        "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
        "author": { "@type": "Organization", "name": "NexTool", "url": "https://nextool.app" }
    }
    </script>

    <!-- Analytics Placeholder -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-PLACEHOLDER"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-PLACEHOLDER');</script>

    <style>
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --bg: #0a0a0a;
            --card: #141414;
            --border: #222222;
            --text: #e5e5e5;
            --text-muted: #888888;
            --accent: #6366f1;
            --accent-hover: #818cf8;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --radius-card: 12px;
            --radius-input: 8px;
            --transition: 0.2s ease;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .header {
            border-bottom: 1px solid var(--border);
            padding: 20px 0;
        }

        .header-inner {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            color: var(--text);
        }

        .logo-icon {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--accent), #a855f7);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 16px;
            color: white;
        }

        .logo-text {
            font-size: 20px;
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        .logo-text span {
            color: var(--accent);
        }

        .badge {
            background: var(--card);
            border: 1px solid var(--border);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            color: var(--text-muted);
        }

        /* Main */
        .main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 24px;
            width: 100%;
            flex: 1;
        }

        .hero {
            text-align: center;
            margin-bottom: 40px;
        }

        .hero h1 {
            font-size: 36px;
            font-weight: 800;
            letter-spacing: -0.03em;
            margin-bottom: 12px;
            background: linear-gradient(135deg, var(--text), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            color: var(--text-muted);
            font-size: 16px;
            max-width: 560px;
            margin: 0 auto;
        }

        /* Textarea Area */
        .editor-section {
            margin-bottom: 32px;
        }

        .textarea-wrapper {
            position: relative;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: var(--radius-card);
            overflow: hidden;
            transition: border-color var(--transition);
        }

        .textarea-wrapper:focus-within {
            border-color: var(--accent);
        }

        .textarea-toolbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            border-bottom: 1px solid var(--border);
            flex-wrap: wrap;
            gap: 8px;
        }

        .toolbar-left {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .toolbar-btn {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-muted);
            padding: 6px 14px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: all var(--transition);
            font-family: inherit;
        }

        .toolbar-btn:hover {
            background: var(--border);
            color: var(--text);
        }

        textarea {
            width: 100%;
            min-height: 260px;
            padding: 20px;
            background: transparent;
            border: none;
            color: var(--text);
            font-size: 15px;
            line-height: 1.7;
            resize: vertical;
            font-family: inherit;
            outline: none;
        }

        textarea::placeholder {
            color: #555;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: var(--radius-card);
            padding: 20px;
            transition: all var(--transition);
        }

        .stat-card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
        }

        .stat-label {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--text-muted);
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            letter-spacing: -0.02em;
            color: var(--text);
        }

        .stat-value.accent {
            color: var(--accent);
        }

        .stat-sub {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 4px;
        }

        /* Sections */
        .section-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 16px;
            letter-spacing: -0.01em;
        }

        .analysis-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 32px;
        }

        @media (max-width: 768px) {
            .analysis-grid {
                grid-template-columns: 1fr;
            }
        }

        .analysis-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: var(--radius-card);
            padding: 24px;
        }

        .analysis-card h3 {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .analysis-card h3 .icon {
            font-size: 18px;
        }

        /* Keyword Density */
        .keyword-list {
            list-style: none;
        }

        .keyword-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
        }

        .keyword-item:last-child {
            border-bottom: none;
        }

        .keyword-word {
            font-weight: 500;
            font-size: 14px;
        }

        .keyword-bar-wrapper {
            flex: 1;
            margin: 0 16px;
            height: 6px;
            background: var(--border);
            border-radius: 3px;
            overflow: hidden;
        }

        .keyword-bar {
            height: 100%;
            background: var(--accent);
            border-radius: 3px;
            transition: width 0.4s ease;
        }

        .keyword-count {
            font-size: 13px;
            color: var(--text-muted);
            min-width: 60px;
            text-align: right;
        }

        /* Readability */
        .readability-score {
            text-align: center;
            padding: 24px 0;
        }

        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 4px solid var(--border);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
            transition: border-color var(--transition);
        }

        .score-circle.easy {
            border-color: var(--success);
        }

        .score-circle.medium {
            border-color: var(--warning);
        }

        .score-circle.hard {
            border-color: var(--error);
        }

        .score-number {
            font-size: 36px;
            font-weight: 800;
            letter-spacing: -0.03em;
        }

        .score-circle.easy .score-number { color: var(--success); }
        .score-circle.medium .score-number { color: var(--warning); }
        .score-circle.hard .score-number { color: var(--error); }

        .score-label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--text-muted);
        }

        .score-description {
            font-size: 14px;
            color: var(--text-muted);
            margin-top: 8px;
        }

        .readability-details {
            margin-top: 20px;
            border-top: 1px solid var(--border);
            padding-top: 16px;
        }

        .readability-detail {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            font-size: 13px;
        }

        .readability-detail span:first-child {
            color: var(--text-muted);
        }

        /* Chart */
        .chart-container {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: var(--radius-card);
            padding: 24px;
            margin-bottom: 32px;
        }

        .chart-bars {
            display: flex;
            align-items: flex-end;
            gap: 8px;
            height: 160px;
            padding-top: 16px;
        }

        .chart-bar-group {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100%;
            justify-content: flex-end;
        }

        .chart-bar {
            width: 100%;
            max-width: 60px;
            background: linear-gradient(180deg, var(--accent), #4338ca);
            border-radius: 4px 4px 0 0;
            transition: height 0.5s ease;
            min-height: 2px;
        }

        .chart-label {
            font-size: 11px;
            color: var(--text-muted);
            margin-top: 8px;
            text-align: center;
        }

        .chart-value {
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 6px;
            color: var(--accent);
        }

        /* Copy Stats */
        .copy-stats-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 12px 28px;
            border-radius: var(--radius-input);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition);
            font-family: inherit;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .copy-stats-btn:hover {
            background: var(--accent-hover);
            transform: translateY(-1px);
        }

        .copy-stats-btn.copied {
            background: var(--success);
        }

        /* Footer */
        .footer {
            border-top: 1px solid var(--border);
            padding: 24px;
            text-align: center;
            color: var(--text-muted);
            font-size: 13px;
        }

        .footer a {
            color: var(--accent);
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* Responsive */
        @media (max-width: 640px) {
            .hero h1 { font-size: 26px; }
            .stats-grid { grid-template-columns: repeat(2, 1fr); gap: 10px; }
            .stat-card { padding: 14px; }
            .stat-value { font-size: 22px; }
            .header-inner { flex-direction: column; gap: 12px; }
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            background: var(--card);
            border: 1px solid var(--border);
            padding: 14px 24px;
            border-radius: var(--radius-input);
            font-size: 14px;
            color: var(--text);
            z-index: 1000;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
            pointer-events: none;
        }

        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Longest word highlight */
        .longest-word {
            font-family: 'SF Mono', 'Fira Code', monospace;
            color: var(--accent);
            font-size: 14px;
            word-break: break-all;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg); }
        ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #333; }
    </style>
</head>
<body>

<header class="header">
    <div class="header-inner">
        <a href="https://nextool.app" class="logo" aria-label="NexTool Home">
            <div class="logo-icon">W</div>
            <div class="logo-text">Word<span>Flow</span></div>
        </a>
        <div class="badge">Free Tool &middot; No Sign-up</div>
    </div>
</header>

<main class="main">
    <div class="hero">
        <h1>Advanced Text Analyzer</h1>
        <p>Paste or type your text to get instant word counts, readability scores, keyword density, and more.</p>
    </div>

    <div class="editor-section">
        <div class="textarea-wrapper">
            <div class="textarea-toolbar">
                <div class="toolbar-left">
                    <button class="toolbar-btn" onclick="loadSample()" aria-label="Load sample text">Sample Text</button>
                    <button class="toolbar-btn" onclick="clearText()" aria-label="Clear text">Clear</button>
                </div>
                <button class="toolbar-btn" onclick="copyStats()" id="copyStatsSmall" aria-label="Copy statistics to clipboard">Copy Stats</button>
            </div>
            <textarea id="textInput" placeholder="Start typing or paste your text here to analyze..." aria-label="Text input for analysis"></textarea>
        </div>
    </div>

    <div class="stats-grid" id="statsGrid">
        <div class="stat-card">
            <div class="stat-label">Words</div>
            <div class="stat-value accent" id="wordCount">0</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Characters</div>
            <div class="stat-value" id="charCount">0</div>
            <div class="stat-sub" id="charNoSpace">0 without spaces</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Sentences</div>
            <div class="stat-value" id="sentenceCount">0</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Paragraphs</div>
            <div class="stat-value" id="paragraphCount">0</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Reading Time</div>
            <div class="stat-value accent" id="readTime">0m</div>
            <div class="stat-sub">~200 wpm</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Speaking Time</div>
            <div class="stat-value" id="speakTime">0m</div>
            <div class="stat-sub">~130 wpm</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Avg Word Length</div>
            <div class="stat-value" id="avgWordLen">0</div>
            <div class="stat-sub">characters</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Unique Words</div>
            <div class="stat-value" id="uniqueWords">0</div>
            <div class="stat-sub" id="uniquePercent">0% of total</div>
        </div>
    </div>

    <!-- Chart -->
    <div class="chart-container">
        <h3 class="section-title">Text Composition</h3>
        <div class="chart-bars" id="chartBars">
            <div class="chart-bar-group">
                <div class="chart-value" id="chartShort">0</div>
                <div class="chart-bar" id="barShort" style="height:2px"></div>
                <div class="chart-label">1-3 chars</div>
            </div>
            <div class="chart-bar-group">
                <div class="chart-value" id="chartMedium">0</div>
                <div class="chart-bar" id="barMedium" style="height:2px"></div>
                <div class="chart-label">4-6 chars</div>
            </div>
            <div class="chart-bar-group">
                <div class="chart-value" id="chartLong">0</div>
                <div class="chart-bar" id="barLong" style="height:2px"></div>
                <div class="chart-label">7-9 chars</div>
            </div>
            <div class="chart-bar-group">
                <div class="chart-value" id="chartVLong">0</div>
                <div class="chart-bar" id="barVLong" style="height:2px"></div>
                <div class="chart-label">10+ chars</div>
            </div>
        </div>
    </div>

    <!-- Analysis -->
    <div class="analysis-grid">
        <!-- Keyword Density -->
        <div class="analysis-card">
            <h3><span class="icon">&#9670;</span> Keyword Density</h3>
            <ul class="keyword-list" id="keywordList">
                <li style="color:var(--text-muted);font-size:14px;padding:20px 0;text-align:center;">Type something to see keyword density</li>
            </ul>
        </div>

        <!-- Readability -->
        <div class="analysis-card">
            <h3><span class="icon">&#9733;</span> Readability Score</h3>
            <div class="readability-score" id="readabilitySection">
                <div class="score-circle" id="scoreCircle">
                    <div class="score-number" id="scoreNumber">--</div>
                    <div class="score-label">Flesch</div>
                </div>
                <div class="score-description" id="scoreDesc">Enter text to calculate readability</div>
                <div class="readability-details" id="readabilityDetails">
                    <div class="readability-detail">
                        <span>Avg. words/sentence</span>
                        <span id="avgWordsPerSentence">0</span>
                    </div>
                    <div class="readability-detail">
                        <span>Avg. syllables/word</span>
                        <span id="avgSyllables">0</span>
                    </div>
                    <div class="readability-detail">
                        <span>Longest word</span>
                        <span class="longest-word" id="longestWord">--</span>
                    </div>
                    <div class="readability-detail">
                        <span>Grade level</span>
                        <span id="gradeLevel">--</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div style="text-align:center;margin-top:8px;">
        <button class="copy-stats-btn" id="copyStatsBtn" onclick="copyStats()" aria-label="Copy all statistics to clipboard">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>
            Copy All Stats
        </button>
    </div>
</main>

<footer class="footer">
    Part of <a href="https://christian140903-sudo.github.io/devtoolkit/">DevToolkit</a> by <a href="https://nextool.app">NexTool</a> &middot; nextool.app
</footer>

<div class="toast" id="toast"></div>

<script>
    const textInput = document.getElementById('textInput');
    let debounceTimer;

    textInput.addEventListener('input', () => {
        clearTimeout(debounceTimer);
        debounceTimer = setTimeout(analyze, 80);
    });

    function analyze() {
        const text = textInput.value;
        const trimmed = text.trim();

        // Basic counts
        const words = trimmed ? trimmed.split(/\s+/).filter(w => w.length > 0) : [];
        const wordCount = words.length;
        const charCount = text.length;
        const charNoSpace = text.replace(/\s/g, '').length;
        const sentences = trimmed ? trimmed.split(/[.!?]+/).filter(s => s.trim().length > 0) : [];
        const sentenceCount = sentences.length;
        const paragraphs = trimmed ? trimmed.split(/\n\s*\n/).filter(p => p.trim().length > 0) : [];
        const paragraphCount = trimmed ? Math.max(paragraphs.length, trimmed.split('\n').filter(l => l.trim().length > 0).length > 0 ? 1 : 0) : 0;
        const actualParagraphs = trimmed ? trimmed.split(/\n\s*\n/).filter(p => p.trim().length > 0).length || (trimmed.length > 0 ? 1 : 0) : 0;

        // Reading / Speaking time
        const readMin = Math.ceil(wordCount / 200);
        const speakMin = Math.ceil(wordCount / 130);

        // Average word length
        const avgLen = wordCount > 0 ? (words.reduce((sum, w) => sum + w.replace(/[^a-zA-Z]/g, '').length, 0) / wordCount).toFixed(1) : '0';

        // Unique words
        const lowerWords = words.map(w => w.toLowerCase().replace(/[^a-z']/g, '')).filter(w => w.length > 0);
        const uniqueSet = new Set(lowerWords);
        const uniqueCount = uniqueSet.size;
        const uniquePct = wordCount > 0 ? Math.round((uniqueCount / wordCount) * 100) : 0;

        // Update DOM
        document.getElementById('wordCount').textContent = wordCount.toLocaleString();
        document.getElementById('charCount').textContent = charCount.toLocaleString();
        document.getElementById('charNoSpace').textContent = charNoSpace.toLocaleString() + ' without spaces';
        document.getElementById('sentenceCount').textContent = sentenceCount.toLocaleString();
        document.getElementById('paragraphCount').textContent = actualParagraphs.toLocaleString();
        document.getElementById('readTime').textContent = readMin > 0 ? readMin + 'm' : '0m';
        document.getElementById('speakTime').textContent = speakMin > 0 ? speakMin + 'm' : '0m';
        document.getElementById('avgWordLen').textContent = avgLen;
        document.getElementById('uniqueWords').textContent = uniqueCount.toLocaleString();
        document.getElementById('uniquePercent').textContent = uniquePct + '% of total';

        // Word length chart
        updateChart(words);

        // Keyword density
        updateKeywords(lowerWords);

        // Readability
        updateReadability(words, sentences, wordCount, sentenceCount);
    }

    function updateChart(words) {
        let short = 0, medium = 0, long = 0, vlong = 0;
        words.forEach(w => {
            const clean = w.replace(/[^a-zA-Z]/g, '');
            const len = clean.length;
            if (len <= 3) short++;
            else if (len <= 6) medium++;
            else if (len <= 9) long++;
            else vlong++;
        });

        const max = Math.max(short, medium, long, vlong, 1);
        const maxHeight = 120;

        document.getElementById('chartShort').textContent = short;
        document.getElementById('chartMedium').textContent = medium;
        document.getElementById('chartLong').textContent = long;
        document.getElementById('chartVLong').textContent = vlong;

        document.getElementById('barShort').style.height = Math.max(2, (short / max) * maxHeight) + 'px';
        document.getElementById('barMedium').style.height = Math.max(2, (medium / max) * maxHeight) + 'px';
        document.getElementById('barLong').style.height = Math.max(2, (long / max) * maxHeight) + 'px';
        document.getElementById('barVLong').style.height = Math.max(2, (vlong / max) * maxHeight) + 'px';
    }

    function updateKeywords(lowerWords) {
        const stopWords = new Set(['the','a','an','and','or','but','in','on','at','to','for','of','with','by','is','it','this','that','was','are','be','has','had','have','will','would','could','should','from','as','not','no','so','if','its','do','does','did','been','can','may','my','your','he','she','we','they','i','me','him','her','us','them','what','which','who','when','where','how','all','each','every','both','few','more','most','than','too','very','just','also','about','up','out','into','over','after','then','only','am','were','our','their','you','his','own','any','these','those','such','other','some','much','many']);
        const freq = {};
        lowerWords.forEach(w => {
            if (w.length > 1 && !stopWords.has(w)) {
                freq[w] = (freq[w] || 0) + 1;
            }
        });

        const sorted = Object.entries(freq).sort((a, b) => b[1] - a[1]).slice(0, 10);
        const list = document.getElementById('keywordList');

        if (sorted.length === 0) {
            list.innerHTML = '<li style="color:var(--text-muted);font-size:14px;padding:20px 0;text-align:center;">Type something to see keyword density</li>';
            return;
        }

        const maxFreq = sorted[0][1];
        list.innerHTML = sorted.map(([word, count]) => {
            const pct = lowerWords.length > 0 ? ((count / lowerWords.length) * 100).toFixed(1) : '0';
            const barWidth = (count / maxFreq) * 100;
            return `<li class="keyword-item">
                <span class="keyword-word">${escapeHtml(word)}</span>
                <div class="keyword-bar-wrapper"><div class="keyword-bar" style="width:${barWidth}%"></div></div>
                <span class="keyword-count">${count}x (${pct}%)</span>
            </li>`;
        }).join('');
    }

    function countSyllables(word) {
        word = word.toLowerCase().replace(/[^a-z]/g, '');
        if (word.length <= 3) return 1;
        word = word.replace(/(?:[^laeiouy]es|ed|[^laeiouy]e)$/, '');
        word = word.replace(/^y/, '');
        const matches = word.match(/[aeiouy]{1,2}/g);
        return matches ? matches.length : 1;
    }

    function updateReadability(words, sentences, wordCount, sentenceCount) {
        if (wordCount < 10 || sentenceCount < 1) {
            document.getElementById('scoreNumber').textContent = '--';
            document.getElementById('scoreDesc').textContent = 'Enter at least 10 words for readability analysis';
            document.getElementById('scoreCircle').className = 'score-circle';
            document.getElementById('avgWordsPerSentence').textContent = '0';
            document.getElementById('avgSyllables').textContent = '0';
            document.getElementById('longestWord').textContent = '--';
            document.getElementById('gradeLevel').textContent = '--';
            return;
        }

        const totalSyllables = words.reduce((sum, w) => sum + countSyllables(w), 0);
        const avgWordsPerSentence = wordCount / sentenceCount;
        const avgSyllablesPerWord = totalSyllables / wordCount;

        // Flesch Reading Ease
        const flesch = Math.round(206.835 - (1.015 * avgWordsPerSentence) - (84.6 * avgSyllablesPerWord));
        const clampedFlesch = Math.max(0, Math.min(100, flesch));

        // Flesch-Kincaid Grade Level
        const grade = ((0.39 * avgWordsPerSentence) + (11.8 * avgSyllablesPerWord) - 15.59).toFixed(1);

        // Longest word
        const cleanWords = words.map(w => w.replace(/[^a-zA-Z]/g, '')).filter(w => w.length > 0);
        const longestWord = cleanWords.reduce((a, b) => a.length >= b.length ? a : b, '');

        let level, desc;
        if (clampedFlesch >= 70) {
            level = 'easy';
            desc = 'Easy to read. Accessible to most audiences.';
        } else if (clampedFlesch >= 50) {
            level = 'medium';
            desc = 'Fairly readable. Suitable for general audiences.';
        } else {
            level = 'hard';
            desc = 'Difficult to read. Best for specialized audiences.';
        }

        document.getElementById('scoreNumber').textContent = clampedFlesch;
        document.getElementById('scoreDesc').textContent = desc;
        document.getElementById('scoreCircle').className = 'score-circle ' + level;
        document.getElementById('avgWordsPerSentence').textContent = avgWordsPerSentence.toFixed(1);
        document.getElementById('avgSyllables').textContent = avgSyllablesPerWord.toFixed(2);
        document.getElementById('longestWord').textContent = longestWord || '--';
        document.getElementById('gradeLevel').textContent = grade > 0 ? 'Grade ' + grade : '--';
    }

    function copyStats() {
        const text = textInput.value.trim();
        const words = text ? text.split(/\s+/).filter(w => w.length > 0) : [];
        const stats = `Text Analysis — WordFlow
━━━━━━━━━━━━━━━━━━━━━━━━
Words: ${document.getElementById('wordCount').textContent}
Characters: ${document.getElementById('charCount').textContent}
Characters (no spaces): ${document.getElementById('charNoSpace').textContent.replace(' without spaces', '')}
Sentences: ${document.getElementById('sentenceCount').textContent}
Paragraphs: ${document.getElementById('paragraphCount').textContent}
Reading Time: ${document.getElementById('readTime').textContent}
Speaking Time: ${document.getElementById('speakTime').textContent}
Avg Word Length: ${document.getElementById('avgWordLen').textContent}
Unique Words: ${document.getElementById('uniqueWords').textContent}
Readability (Flesch): ${document.getElementById('scoreNumber').textContent}
Grade Level: ${document.getElementById('gradeLevel').textContent}
Longest Word: ${document.getElementById('longestWord').textContent}
━━━━━━━━━━━━━━━━━━━━━━━━
Generated by WordFlow — nextool.app`;

        navigator.clipboard.writeText(stats).then(() => {
            showToast('Statistics copied to clipboard');
            const btn = document.getElementById('copyStatsBtn');
            btn.classList.add('copied');
            btn.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg> Copied!';
            setTimeout(() => {
                btn.classList.remove('copied');
                btn.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg> Copy All Stats';
            }, 2000);
        });
    }

    function loadSample() {
        textInput.value = `The art of writing is the art of discovering what you believe. Every sentence is a voyage of discovery, revealing layers of meaning that even the author may not have anticipated.

Good writing is essentially rewriting. The first draft is just getting the ideas down. The real craft lies in revising, refining, and polishing until every word earns its place on the page.

Writers must develop a keen sense of rhythm. Short sentences create tension. Longer sentences, with their flowing clauses and carefully placed modifiers, can create a sense of contemplation and depth that draws the reader deeper into the narrative.

The best writers read voraciously. They understand that language is a living, breathing entity that evolves with every generation. By immersing themselves in diverse texts, they absorb new patterns, vocabulary, and ways of seeing the world that inevitably enrich their own work.

Ultimately, writing is not about perfection. It is about connection — the miraculous bridge between one mind and another, built entirely from words arranged on a page.`;
        analyze();
    }

    function clearText() {
        textInput.value = '';
        analyze();
        textInput.focus();
    }

    function showToast(msg) {
        const toast = document.getElementById('toast');
        toast.textContent = msg;
        toast.classList.add('show');
        setTimeout(() => toast.classList.remove('show'), 2500);
    }

    function escapeHtml(str) {
        const div = document.createElement('div');
        div.textContent = str;
        return div.innerHTML;
    }

    // Initial state
    analyze();
</script>
</body>
</html>