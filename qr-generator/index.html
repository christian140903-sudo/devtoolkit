<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free QR Code Generator - Create Custom QR Codes Online | QRForge</title>
<meta name="description" content="Generate free QR codes instantly for URLs, text, email, phone, WiFi, and vCards. Customize colors, sizes, and download as PNG, SVG, or PDF. No signup required.">
<meta name="keywords" content="free qr code generator, qr code maker, custom qr code, qr code creator online, generate qr code, url qr code, wifi qr code, vcard qr code">
<meta name="robots" content="index, follow">
<meta name="author" content="QRForge">
<link rel="canonical" href="https://christian140903-sudo.github.io/devtoolkit/qr-generator/">

<!-- Google Analytics 4 -->
// <!-- GA: Replace G-PLACEHOLDER with real GA4 ID --><!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-PLACEHOLDER"></script> -->
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
//   gtag('config', 'G-PLACEHOLDER');
</script>

<!-- Open Graph -->
<meta property="og:title" content="Free QR Code Generator - Create Custom QR Codes Online | QRForge">
<meta property="og:description" content="Generate free QR codes instantly. Customize colors, sizes, download as PNG, SVG, or PDF. No signup required.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://christian140903-sudo.github.io/devtoolkit/qr-generator/">
<meta property="og:site_name" content="DevToolkit">
<meta property="og:image" content="https://christian140903-sudo.github.io/devtoolkit/qr-generator/og-image.png">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free QR Code Generator - Create Custom QR Codes Online | QRForge">
<meta name="twitter:description" content="Generate free QR codes instantly. Customize colors, sizes, download as PNG, SVG, or PDF. No signup required.">
<meta name="twitter:image" content="https://christian140903-sudo.github.io/devtoolkit/qr-generator/og-image.png">

<!-- Schema.org -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "QRForge - Free QR Code Generator",
  "url": "https://christian140903-sudo.github.io/devtoolkit/qr-generator/",
  "description": "Generate free QR codes instantly for URLs, text, email, phone, WiFi, and vCards. Customize colors, sizes, and download as PNG, SVG, or PDF.",
  "applicationCategory": "UtilityApplication",
  "operatingSystem": "Any",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "featureList": ["URL QR Codes", "Text QR Codes", "Email QR Codes", "Phone QR Codes", "WiFi QR Codes", "vCard QR Codes", "Custom Colors", "PNG Download", "SVG Download", "PDF Download"]
}
</script>

<script src="https://cdn.jsdelivr.net/npm/qr-code-styling@1.6.0-rc.1/lib/qr-code-styling.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --bg: #0f1117;
  --surface: #1a1d27;
  --surface2: #242837;
  --surface3: #2e3348;
  --border: #363b50;
  --text: #e4e6f0;
  --text2: #9399b2;
  --accent: #6c5ce7;
  --accent2: #a29bfe;
  --accent-glow: rgba(108, 92, 231, 0.25);
  --green: #00cec9;
  --red: #ff6b6b;
  --orange: #fdcb6e;
  --radius: 12px;
  --radius-sm: 8px;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.6;
  min-height: 100vh;
}

/* Scrollbar */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: var(--surface); }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

/* Header */
header {
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  padding: 16px 0;
  position: sticky;
  top: 0;
  z-index: 100;
  backdrop-filter: blur(20px);
}
.header-inner {
  max-width: 1280px;
  margin: 0 auto;
  padding: 0 24px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.logo {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 22px;
  font-weight: 800;
  letter-spacing: -0.5px;
  text-decoration: none;
  color: var(--text);
}
.logo-icon {
  width: 36px; height: 36px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  border-radius: var(--radius-sm);
  display: flex; align-items: center; justify-content: center;
  font-size: 18px; color: #fff;
}
.logo span { color: var(--accent2); }
.pro-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  background: linear-gradient(135deg, var(--accent), #fd79a8);
  color: #fff;
  font-size: 11px;
  font-weight: 700;
  padding: 4px 10px;
  border-radius: 20px;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}
.pro-badge:hover { transform: scale(1.05); box-shadow: 0 4px 15px var(--accent-glow); }

/* Main Layout */
.container {
  max-width: 1280px;
  margin: 0 auto;
  padding: 32px 24px;
}
.app-grid {
  display: grid;
  grid-template-columns: 1fr 400px;
  gap: 32px;
  align-items: start;
}

/* Cards */
.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px;
}
.card-title {
  font-size: 15px;
  font-weight: 700;
  margin-bottom: 20px;
  color: var(--text);
  display: flex;
  align-items: center;
  gap: 8px;
}
.card-title svg { width: 18px; height: 18px; color: var(--accent2); }

/* Type Tabs */
.type-tabs {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 6px;
  margin-bottom: 24px;
}
.type-tab {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 12px 6px;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
  background: var(--surface2);
  color: var(--text2);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}
.type-tab svg { width: 20px; height: 20px; }
.type-tab:hover { border-color: var(--accent); color: var(--text); }
.type-tab.active {
  border-color: var(--accent);
  background: var(--accent-glow);
  color: var(--accent2);
}

/* Form Elements */
.form-group { margin-bottom: 16px; }
.form-label {
  display: block;
  font-size: 13px;
  font-weight: 600;
  color: var(--text2);
  margin-bottom: 6px;
}
.form-input, .form-select, .form-textarea {
  width: 100%;
  padding: 10px 14px;
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  color: var(--text);
  font-size: 14px;
  transition: border-color 0.2s;
  outline: none;
  font-family: inherit;
}
.form-input:focus, .form-select:focus, .form-textarea:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--accent-glow);
}
.form-textarea { resize: vertical; min-height: 80px; }
.form-select { cursor: pointer; appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%239399b2' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 12px center; padding-right: 36px; }
.form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }

/* Color Picker */
.color-picker-wrap {
  display: flex;
  align-items: center;
  gap: 10px;
}
.color-preview {
  width: 38px; height: 38px;
  border-radius: var(--radius-sm);
  border: 2px solid var(--border);
  cursor: pointer;
  position: relative;
  overflow: hidden;
}
.color-preview input[type="color"] {
  position: absolute;
  top: -4px; left: -4px;
  width: 48px; height: 48px;
  border: none;
  cursor: pointer;
  opacity: 0;
}
.color-hex {
  flex: 1;
}

/* Size Presets */
.size-presets {
  display: flex;
  gap: 8px;
  margin-bottom: 8px;
}
.size-preset {
  flex: 1;
  padding: 8px;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
  background: var(--surface2);
  color: var(--text2);
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  text-align: center;
  transition: all 0.2s;
}
.size-preset:hover { border-color: var(--accent); }
.size-preset.active { border-color: var(--accent); background: var(--accent-glow); color: var(--accent2); }

/* Preview Panel */
.preview-panel {
  position: sticky;
  top: 80px;
}
.qr-preview-area {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 320px;
  background: var(--surface2);
  border-radius: var(--radius-sm);
  margin-bottom: 16px;
  padding: 24px;
  position: relative;
}
.qr-preview-area canvas, .qr-preview-area svg { max-width: 100%; }
.qr-placeholder {
  text-align: center;
  color: var(--text2);
}
.qr-placeholder svg { width: 64px; height: 64px; margin-bottom: 12px; opacity: 0.3; }
.qr-placeholder p { font-size: 14px; }

/* Watermark */
.watermark {
  position: absolute;
  bottom: 8px;
  right: 12px;
  font-size: 9px;
  color: var(--text2);
  opacity: 0.5;
}

/* Download Buttons */
.download-btns {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  margin-bottom: 16px;
}
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 10px 16px;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
  background: var(--surface2);
  color: var(--text);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}
.btn:hover { border-color: var(--accent); background: var(--surface3); }
.btn:disabled { opacity: 0.4; cursor: not-allowed; }
.btn-primary {
  background: linear-gradient(135deg, var(--accent), #a29bfe);
  border: none;
  color: #fff;
}
.btn-primary:hover { box-shadow: 0 4px 15px var(--accent-glow); transform: translateY(-1px); }
.btn-full { width: 100%; }
.btn svg { width: 16px; height: 16px; }

/* Premium Feature Button */
.btn-premium {
  position: relative;
  overflow: hidden;
}
.btn-premium::after {
  content: 'PRO';
  position: absolute;
  top: 4px; right: 4px;
  background: linear-gradient(135deg, var(--accent), #fd79a8);
  color: #fff;
  font-size: 8px;
  font-weight: 800;
  padding: 1px 5px;
  border-radius: 4px;
}

/* Batch Section */
.batch-section { margin-top: 24px; }
.batch-items { display: flex; flex-direction: column; gap: 8px; margin-bottom: 12px; }
.batch-item {
  display: flex;
  gap: 8px;
  align-items: center;
}
.batch-item .form-input { flex: 1; }
.batch-remove {
  width: 32px; height: 32px;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
  background: var(--surface2);
  color: var(--red);
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  font-size: 18px;
  transition: all 0.2s;
}
.batch-remove:hover { background: rgba(255,107,107,0.1); border-color: var(--red); }
.batch-counter {
  font-size: 12px;
  color: var(--text2);
  margin-top: 8px;
}
.batch-counter strong { color: var(--accent2); }

/* History */
.history-section { margin-top: 32px; }
.history-list { display: flex; flex-direction: column; gap: 8px; }
.history-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: var(--surface2);
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
  cursor: pointer;
  transition: all 0.2s;
}
.history-item:hover { border-color: var(--accent); }
.history-item-preview {
  width: 48px; height: 48px;
  border-radius: 6px;
  background: #fff;
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0;
  overflow: hidden;
}
.history-item-preview img { width: 100%; height: 100%; object-fit: contain; }
.history-item-info { flex: 1; min-width: 0; }
.history-item-info .label { font-size: 12px; color: var(--text2); text-transform: uppercase; font-weight: 600; }
.history-item-info .value { font-size: 13px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.history-item-actions { display: flex; gap: 6px; }
.history-delete {
  width: 28px; height: 28px;
  border-radius: 6px;
  border: none;
  background: transparent;
  color: var(--text2);
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: all 0.2s;
}
.history-delete:hover { color: var(--red); background: rgba(255,107,107,0.1); }
.history-empty {
  text-align: center;
  padding: 24px;
  color: var(--text2);
  font-size: 13px;
}

/* Modal */
.modal-overlay {
  display: none;
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.7);
  z-index: 1000;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(4px);
}
.modal-overlay.active { display: flex; }
.modal {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 32px;
  max-width: 440px;
  width: 90%;
  text-align: center;
  animation: modalIn 0.3s ease;
}
@keyframes modalIn { from { opacity:0; transform: scale(0.9) translateY(20px); } }
.modal-icon {
  width: 64px; height: 64px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--accent), #fd79a8);
  display: flex; align-items: center; justify-content: center;
  margin: 0 auto 20px;
  font-size: 28px;
}
.modal h2 { font-size: 22px; margin-bottom: 8px; }
.modal p { color: var(--text2); margin-bottom: 24px; font-size: 14px; line-height: 1.7; }
.modal-price { font-size: 36px; font-weight: 800; margin-bottom: 4px; }
.modal-price span { font-size: 16px; color: var(--text2); font-weight: 400; }
.modal-features { text-align: left; margin: 20px 0; }
.modal-features li {
  list-style: none;
  padding: 6px 0;
  font-size: 14px;
  color: var(--text2);
  display: flex;
  align-items: center;
  gap: 8px;
}
.modal-features li::before { content: '\2713'; color: var(--green); font-weight: 700; }
.modal-actions { display: flex; flex-direction: column; gap: 10px; }
.modal-close {
  background: none; border: none;
  color: var(--text2);
  cursor: pointer;
  font-size: 13px;
  padding: 8px;
}
.modal-close:hover { color: var(--text); }

/* Toast */
.toast {
  position: fixed;
  bottom: 24px;
  right: 24px;
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 12px 20px;
  font-size: 13px;
  color: var(--text);
  z-index: 2000;
  animation: toastIn 0.3s ease, toastOut 0.3s ease 2.7s;
  display: flex;
  align-items: center;
  gap: 8px;
  box-shadow: 0 8px 30px rgba(0,0,0,0.3);
}
@keyframes toastIn { from { opacity:0; transform: translateY(20px); } }
@keyframes toastOut { to { opacity:0; transform: translateY(20px); } }

/* Section Divider */
.divider {
  border: none;
  border-top: 1px solid var(--border);
  margin: 20px 0;
}

/* SEO Content */
.seo-section {
  max-width: 1280px;
  margin: 48px auto;
  padding: 0 24px;
}
.seo-section h2 {
  font-size: 24px;
  margin-bottom: 16px;
}
.seo-section p {
  color: var(--text2);
  font-size: 15px;
  line-height: 1.8;
  max-width: 720px;
}
.seo-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
  margin-top: 24px;
}
.seo-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px;
}
.seo-card h3 { font-size: 16px; margin-bottom: 8px; }
.seo-card p { font-size: 13px; color: var(--text2); line-height: 1.7; }

/* Footer */
footer {
  text-align: center;
  padding: 32px 24px;
  color: var(--text2);
  font-size: 13px;
  border-top: 1px solid var(--border);
  margin-top: 48px;
}
footer a { color: var(--accent2); text-decoration: none; }

/* Responsive */
@media (max-width: 900px) {
  .app-grid { grid-template-columns: 1fr; }
  .preview-panel { position: static; }
  .type-tabs { grid-template-columns: repeat(3, 1fr); }
  .seo-grid { grid-template-columns: 1fr; }
}
@media (max-width: 480px) {
  .type-tabs { grid-template-columns: repeat(2, 1fr); }
  .header-inner { flex-wrap: wrap; gap: 12px; }
  .download-btns { grid-template-columns: 1fr; }
}
</style>
</head>
<body>

<header>
  <div class="header-inner">
    <a href="/" class="logo">
      <div class="logo-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" width="20" height="20"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><circle cx="17.5" cy="17.5" r="2.5"/></svg>
      </div>
      QR<span>Forge</span>
    </a>
    <div class="pro-badge" onclick="showProModal('general')">
      <svg viewBox="0 0 24 24" fill="currentColor" width="12" height="12"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
      Upgrade to Pro
    </div>
  </div>
</header>

<main class="container">
  <div class="app-grid">
    <!-- Left: Controls -->
    <div>
      <!-- QR Type -->
      <div class="card">
        <div class="card-title">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><path d="M14 14h3v3h-3zm4 0h3v3h-3zm-4 4h3v3h-3zm4 0h3v3h-3z"/></svg>
          QR Code Type
        </div>
        <div class="type-tabs" id="typeTabs">
          <button class="type-tab active" data-type="url" onclick="setType('url')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
            URL
          </button>
          <button class="type-tab" data-type="text" onclick="setType('text')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
            Text
          </button>
          <button class="type-tab" data-type="email" onclick="setType('email')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
            Email
          </button>
          <button class="type-tab" data-type="phone" onclick="setType('phone')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
            Phone
          </button>
          <button class="type-tab" data-type="wifi" onclick="setType('wifi')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12.55a11 11 0 0 1 14.08 0"/><path d="M1.42 9a16 16 0 0 1 21.16 0"/><path d="M8.53 16.11a6 6 0 0 1 6.95 0"/><circle cx="12" cy="20" r="1"/></svg>
            WiFi
          </button>
          <button class="type-tab" data-type="vcard" onclick="setType('vcard')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
            vCard
          </button>
        </div>

        <!-- Dynamic Form Fields -->
        <div id="formFields"></div>
      </div>

      <!-- Customization -->
      <div class="card" style="margin-top: 16px;">
        <div class="card-title">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
          Customization
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Foreground Color</label>
            <div class="color-picker-wrap">
              <div class="color-preview" id="fgPreview" style="background: #ffffff">
                <input type="color" id="fgColor" value="#ffffff" onchange="updateColor('fg')">
              </div>
              <input type="text" class="form-input color-hex" id="fgHex" value="#ffffff" maxlength="7" onchange="updateHex('fg')">
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Background Color</label>
            <div class="color-picker-wrap">
              <div class="color-preview" id="bgPreview" style="background: #0f1117">
                <input type="color" id="bgColor" value="#0f1117" onchange="updateColor('bg')">
              </div>
              <input type="text" class="form-input color-hex" id="bgHex" value="#0f1117" maxlength="7" onchange="updateHex('bg')">
            </div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Size</label>
          <div class="size-presets" id="sizePresets">
            <button class="size-preset" data-size="150" onclick="setSize(150)">Small</button>
            <button class="size-preset active" data-size="300" onclick="setSize(300)">Medium</button>
            <button class="size-preset" data-size="500" onclick="setSize(500)">Large</button>
            <button class="size-preset" data-size="custom" onclick="showCustomSize()">Custom</button>
          </div>
          <input type="number" class="form-input" id="customSize" placeholder="Enter size in px (100-2000)" min="100" max="2000" style="display:none" oninput="setSize(parseInt(this.value)||300)">
        </div>

        <div class="form-group">
          <label class="form-label">Error Correction</label>
          <select class="form-select" id="errorCorrection" onchange="generateQR()">
            <option value="L">Low (7%) - Smaller QR</option>
            <option value="M" selected>Medium (15%) - Recommended</option>
            <option value="Q">Quartile (25%) - Better recovery</option>
            <option value="H">High (30%) - Best recovery</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Dot Style</label>
          <select class="form-select" id="dotStyle" onchange="generateQR()">
            <option value="square">Square</option>
            <option value="dots" selected>Dots</option>
            <option value="rounded">Rounded</option>
            <option value="extra-rounded">Extra Rounded</option>
            <option value="classy">Classy</option>
            <option value="classy-rounded">Classy Rounded</option>
          </select>
        </div>

        <hr class="divider">

        <!-- Premium Features -->
        <div class="form-group">
          <button class="btn btn-full btn-premium" onclick="showProModal('logo')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
            Add Logo / Image
          </button>
        </div>
        <div class="form-group">
          <button class="btn btn-full btn-premium" onclick="showProModal('tracking')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
            Enable Scan Tracking
          </button>
        </div>
      </div>

      <!-- Batch Generation -->
      <div class="card batch-section" style="margin-top: 16px;">
        <div class="card-title">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg>
          Batch Generation
        </div>
        <p style="font-size: 13px; color: var(--text2); margin-bottom: 12px;">Generate multiple QR codes at once. Free: up to 3.</p>
        <div class="batch-items" id="batchItems">
          <div class="batch-item">
            <input type="text" class="form-input" placeholder="Enter URL or text..." data-batch-index="0">
            <button class="batch-remove" onclick="removeBatchItem(this)" title="Remove">&times;</button>
          </div>
        </div>
        <div style="display: flex; gap: 8px;">
          <button class="btn" onclick="addBatchItem()" id="addBatchBtn" style="flex:1">+ Add Item</button>
          <button class="btn btn-primary" onclick="generateBatch()" style="flex:1">Generate All</button>
        </div>
        <div class="batch-counter" id="batchCounter"><strong>1</strong> / 3 free slots used</div>
      </div>
    </div>

    <!-- Right: Preview -->
    <div class="preview-panel">
      <div class="card">
        <div class="card-title">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
          Live Preview
        </div>
        <div class="qr-preview-area" id="qrPreview">
          <div class="qr-placeholder" id="qrPlaceholder">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="3" height="3"/><rect x="18" y="18" width="3" height="3"/></svg>
            <p>Enter content to generate<br>your QR code</p>
          </div>
          <div class="watermark">Made with QRForge</div>
        </div>
        <div class="download-btns">
          <button class="btn" id="dlPng" onclick="downloadQR('png')" disabled>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
            PNG
          </button>
          <button class="btn" id="dlSvg" onclick="downloadQR('svg')" disabled>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
            SVG
          </button>
          <button class="btn" id="dlPdf" onclick="downloadQR('pdf')" disabled>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
            PDF
          </button>
        </div>
        <button class="btn btn-primary btn-full" id="generateBtn" onclick="generateQR()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><circle cx="17.5" cy="17.5" r="2.5"/></svg>
          Generate QR Code
        </button>
      </div>

      <!-- History -->
      <div class="card history-section" style="margin-top: 16px;">
        <div class="card-title">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
          Recent QR Codes
        </div>
        <div id="historyList">
          <div class="history-empty">No QR codes generated yet.</div>
        </div>
      </div>
    </div>
  </div>
</main>

<!-- SEO Content -->
<section class="seo-section">
  <h2>Free QR Code Generator</h2>
  <p>Create professional QR codes in seconds with QRForge. Generate QR codes for URLs, text, emails, phone numbers, WiFi networks, and contact cards. Customize colors, sizes, and dot styles. Download in PNG, SVG, or PDF format -- completely free.</p>
  <div class="seo-grid">
    <div class="seo-card">
      <h3>Easy to Use</h3>
      <p>Simply enter your content and get a QR code instantly. Live preview updates as you type. No signup or account required.</p>
    </div>
    <div class="seo-card">
      <h3>Fully Customizable</h3>
      <p>Choose custom foreground and background colors, select from multiple dot styles, and adjust the size to fit your needs perfectly.</p>
    </div>
    <div class="seo-card">
      <h3>Multiple Formats</h3>
      <p>Download your QR codes as PNG for web use, SVG for print quality, or PDF for documents. Batch generate up to 3 QR codes at once for free.</p>
    </div>
  </div>
</section>

<footer>
  &copy; 2026 QRForge. Free QR Code Generator. <a href="#">Privacy</a> &middot; <a href="#">Terms</a>
</footer>

<!-- Pro Modal -->
<div class="modal-overlay" id="proModal" onclick="if(event.target===this)closeModal()">
  <div class="modal">
    <div class="modal-icon" id="modalIcon">&#9733;</div>
    <h2 id="modalTitle">Upgrade to QRForge Pro</h2>
    <p id="modalDesc">Unlock powerful features for your QR codes.</p>
    <div class="modal-price" id="modalPrice">$4.99 <span>/month</span></div>
    <ul class="modal-features" id="modalFeatures"></ul>
    <div class="modal-actions">
      <button class="btn btn-primary btn-full" onclick="toast('Coming soon! Join the waitlist.')">Get QRForge Pro</button>
      <button class="modal-close" onclick="closeModal()">Maybe later</button>
    </div>
  </div>
</div>

<script>
// State
let currentType = 'url';
let currentSize = 300;
let qrInstance = null;
let qrData = '';
const MAX_FREE_BATCH = 3;
const HISTORY_KEY = 'qrforge_history';

// Init
document.addEventListener('DOMContentLoaded', () => {
  setType('url');
  loadHistory();
});

// Type switching
function setType(type) {
  currentType = type;
  document.querySelectorAll('.type-tab').forEach(t => t.classList.toggle('active', t.dataset.type === type));
  renderForm(type);
}

function renderForm(type) {
  const f = document.getElementById('formFields');
  const forms = {
    url: `<div class="form-group"><label class="form-label">Website URL</label><input type="url" class="form-input" id="qrInput" placeholder="https://example.com" oninput="livePreview()"></div>`,
    text: `<div class="form-group"><label class="form-label">Text Content</label><textarea class="form-textarea" id="qrInput" placeholder="Enter your text here..." oninput="livePreview()"></textarea></div>`,
    email: `<div class="form-group"><label class="form-label">Email Address</label><input type="email" class="form-input" id="emailAddr" placeholder="hello@example.com" oninput="livePreview()"></div>
      <div class="form-group"><label class="form-label">Subject (optional)</label><input type="text" class="form-input" id="emailSubj" placeholder="Subject line" oninput="livePreview()"></div>
      <div class="form-group"><label class="form-label">Message (optional)</label><textarea class="form-textarea" id="emailBody" placeholder="Email body..." oninput="livePreview()"></textarea></div>`,
    phone: `<div class="form-group"><label class="form-label">Phone Number</label><input type="tel" class="form-input" id="qrInput" placeholder="+1 234 567 8900" oninput="livePreview()"></div>`,
    wifi: `<div class="form-group"><label class="form-label">Network Name (SSID)</label><input type="text" class="form-input" id="wifiSsid" placeholder="My WiFi Network" oninput="livePreview()"></div>
      <div class="form-row"><div class="form-group"><label class="form-label">Security</label><select class="form-select" id="wifiSec" onchange="livePreview()"><option value="WPA">WPA/WPA2</option><option value="WEP">WEP</option><option value="">None</option></select></div>
      <div class="form-group"><label class="form-label">Password</label><input type="text" class="form-input" id="wifiPass" placeholder="Password" oninput="livePreview()"></div></div>
      <div class="form-group"><label class="form-label"><input type="checkbox" id="wifiHidden" onchange="livePreview()"> Hidden Network</label></div>`,
    vcard: `<div class="form-row"><div class="form-group"><label class="form-label">First Name</label><input type="text" class="form-input" id="vcFirst" placeholder="John" oninput="livePreview()"></div>
      <div class="form-group"><label class="form-label">Last Name</label><input type="text" class="form-input" id="vcLast" placeholder="Doe" oninput="livePreview()"></div></div>
      <div class="form-group"><label class="form-label">Phone</label><input type="tel" class="form-input" id="vcPhone" placeholder="+1 234 567 8900" oninput="livePreview()"></div>
      <div class="form-group"><label class="form-label">Email</label><input type="email" class="form-input" id="vcEmail" placeholder="john@example.com" oninput="livePreview()"></div>
      <div class="form-group"><label class="form-label">Company</label><input type="text" class="form-input" id="vcOrg" placeholder="Acme Inc." oninput="livePreview()"></div>
      <div class="form-group"><label class="form-label">Website</label><input type="url" class="form-input" id="vcUrl" placeholder="https://example.com" oninput="livePreview()"></div>`
  };
  f.innerHTML = forms[type] || '';
}

function getQRData() {
  switch (currentType) {
    case 'url':
    case 'text':
      return (document.getElementById('qrInput')?.value || '').trim();
    case 'phone':
      const ph = (document.getElementById('qrInput')?.value || '').trim();
      return ph ? `tel:${ph}` : '';
    case 'email': {
      const addr = (document.getElementById('emailAddr')?.value || '').trim();
      if (!addr) return '';
      const subj = (document.getElementById('emailSubj')?.value || '').trim();
      const body = (document.getElementById('emailBody')?.value || '').trim();
      let mailto = `mailto:${addr}`;
      const params = [];
      if (subj) params.push(`subject=${encodeURIComponent(subj)}`);
      if (body) params.push(`body=${encodeURIComponent(body)}`);
      if (params.length) mailto += '?' + params.join('&');
      return mailto;
    }
    case 'wifi': {
      const ssid = (document.getElementById('wifiSsid')?.value || '').trim();
      if (!ssid) return '';
      const sec = document.getElementById('wifiSec')?.value || '';
      const pass = (document.getElementById('wifiPass')?.value || '').trim();
      const hidden = document.getElementById('wifiHidden')?.checked ? 'H:true;' : '';
      return `WIFI:T:${sec};S:${ssid};P:${pass};${hidden};`;
    }
    case 'vcard': {
      const fn = (document.getElementById('vcFirst')?.value || '').trim();
      const ln = (document.getElementById('vcLast')?.value || '').trim();
      if (!fn && !ln) return '';
      const ph2 = (document.getElementById('vcPhone')?.value || '').trim();
      const em = (document.getElementById('vcEmail')?.value || '').trim();
      const org = (document.getElementById('vcOrg')?.value || '').trim();
      const url = (document.getElementById('vcUrl')?.value || '').trim();
      let v = `BEGIN:VCARD\nVERSION:3.0\nN:${ln};${fn};;;\nFN:${fn} ${ln}\n`;
      if (ph2) v += `TEL:${ph2}\n`;
      if (em) v += `EMAIL:${em}\n`;
      if (org) v += `ORG:${org}\n`;
      if (url) v += `URL:${url}\n`;
      v += 'END:VCARD';
      return v;
    }
    default: return '';
  }
}

// Live preview with debounce
let debounceTimer;
function livePreview() {
  clearTimeout(debounceTimer);
  debounceTimer = setTimeout(() => generateQR(), 300);
}

// QR Generation
function generateQR() {
  const data = getQRData();
  if (!data) {
    document.getElementById('qrPlaceholder').style.display = 'block';
    enableDownloads(false);
    // Clear previous QR
    const preview = document.getElementById('qrPreview');
    const existing = preview.querySelector('.qr-canvas-wrap');
    if (existing) existing.remove();
    return;
  }

  qrData = data;
  const fgColor = document.getElementById('fgColor').value;
  const bgColor = document.getElementById('bgColor').value;
  const ecl = document.getElementById('errorCorrection').value;
  const dotType = document.getElementById('dotStyle').value;

  // Clear previous
  const preview = document.getElementById('qrPreview');
  let wrap = preview.querySelector('.qr-canvas-wrap');
  if (wrap) wrap.remove();

  wrap = document.createElement('div');
  wrap.className = 'qr-canvas-wrap';
  preview.insertBefore(wrap, preview.firstChild);

  document.getElementById('qrPlaceholder').style.display = 'none';

  const correctionMap = { L: 0, M: 1, Q: 2, H: 3 };

  qrInstance = new QRCodeStyling({
    width: currentSize,
    height: currentSize,
    type: 'canvas',
    data: data,
    dotsOptions: {
      color: fgColor,
      type: dotType
    },
    backgroundOptions: {
      color: bgColor
    },
    cornersSquareOptions: {
      color: fgColor,
      type: 'extra-rounded'
    },
    cornersDotOptions: {
      color: fgColor,
      type: 'dot'
    },
    qrOptions: {
      errorCorrectionLevel: ecl
    }
  });

  qrInstance.append(wrap);
  enableDownloads(true);

  // Save to history
  setTimeout(() => {
    const canvas = wrap.querySelector('canvas');
    if (canvas) {
      saveToHistory(data, canvas.toDataURL('image/png'));
    }
  }, 500);
}

function enableDownloads(enabled) {
  document.getElementById('dlPng').disabled = !enabled;
  document.getElementById('dlSvg').disabled = !enabled;
  document.getElementById('dlPdf').disabled = !enabled;
}

// Downloads
function downloadQR(format) {
  if (!qrInstance) return;

  const timestamp = Date.now();

  if (format === 'png') {
    // Create a new canvas with watermark
    const fgColor = document.getElementById('fgColor').value;
    const bgColor = document.getElementById('bgColor').value;

    qrInstance.getRawData('png').then(blob => {
      const img = new Image();
      img.onload = () => {
        const canvas = document.createElement('canvas');
        const pad = 30;
        canvas.width = img.width;
        canvas.height = img.height + pad;
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = bgColor;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(img, 0, 0);
        ctx.fillStyle = fgColor;
        ctx.globalAlpha = 0.3;
        ctx.font = '10px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('Made with QRForge', canvas.width / 2, canvas.height - 10);
        canvas.toBlob(b => {
          const a = document.createElement('a');
          a.href = URL.createObjectURL(b);
          a.download = `qrforge-${timestamp}.png`;
          a.click();
          URL.revokeObjectURL(a.href);
        });
      };
      img.src = URL.createObjectURL(blob);
    });
  } else if (format === 'svg') {
    qrInstance.download({ name: `qrforge-${timestamp}`, extension: 'svg' });
  } else if (format === 'pdf') {
    qrInstance.getRawData('png').then(blob => {
      const img = new Image();
      img.onload = () => {
        const { jsPDF } = window.jspdf;
        const pdf = new jsPDF({
          orientation: img.width > img.height ? 'l' : 'p',
          unit: 'px',
          format: [img.width + 40, img.height + 60]
        });
        pdf.addImage(img, 'PNG', 20, 20, img.width, img.height);
        pdf.setFontSize(8);
        pdf.setTextColor(150);
        pdf.text('Made with QRForge', (img.width + 40) / 2, img.height + 45, { align: 'center' });
        pdf.save(`qrforge-${timestamp}.pdf`);
      };
      img.src = URL.createObjectURL(blob);
    });
  }
  toast(`QR code downloaded as ${format.toUpperCase()}`);
}

// Color helpers
function updateColor(which) {
  const color = document.getElementById(which + 'Color').value;
  document.getElementById(which + 'Hex').value = color;
  document.getElementById(which + 'Preview').style.background = color;
  generateQR();
}
function updateHex(which) {
  let hex = document.getElementById(which + 'Hex').value.trim();
  if (!hex.startsWith('#')) hex = '#' + hex;
  if (/^#[0-9A-Fa-f]{6}$/.test(hex)) {
    document.getElementById(which + 'Color').value = hex;
    document.getElementById(which + 'Preview').style.background = hex;
    generateQR();
  }
}

// Size
function setSize(size) {
  currentSize = Math.min(2000, Math.max(100, size || 300));
  document.querySelectorAll('.size-preset').forEach(p => {
    if (p.dataset.size === 'custom') {
      p.classList.toggle('active', ![150,300,500].includes(currentSize));
    } else {
      p.classList.toggle('active', parseInt(p.dataset.size) === currentSize);
    }
  });
  generateQR();
}
function showCustomSize() {
  const el = document.getElementById('customSize');
  el.style.display = el.style.display === 'none' ? 'block' : 'none';
  if (el.style.display === 'block') el.focus();
  document.querySelectorAll('.size-preset').forEach(p => p.classList.remove('active'));
  document.querySelector('.size-preset[data-size="custom"]').classList.add('active');
}

// Batch
function addBatchItem() {
  const container = document.getElementById('batchItems');
  const count = container.children.length;
  if (count >= MAX_FREE_BATCH) {
    showProModal('batch');
    return;
  }
  const div = document.createElement('div');
  div.className = 'batch-item';
  div.innerHTML = `<input type="text" class="form-input" placeholder="Enter URL or text..." data-batch-index="${count}"><button class="batch-remove" onclick="removeBatchItem(this)" title="Remove">&times;</button>`;
  container.appendChild(div);
  updateBatchCounter();
}
function removeBatchItem(btn) {
  const container = document.getElementById('batchItems');
  if (container.children.length <= 1) return;
  btn.parentElement.remove();
  updateBatchCounter();
}
function updateBatchCounter() {
  const count = document.getElementById('batchItems').children.length;
  document.getElementById('batchCounter').innerHTML = `<strong>${count}</strong> / ${MAX_FREE_BATCH} free slots used`;
}
function generateBatch() {
  const inputs = document.querySelectorAll('#batchItems .form-input');
  const fgColor = document.getElementById('fgColor').value;
  const bgColor = document.getElementById('bgColor').value;
  const ecl = document.getElementById('errorCorrection').value;
  const dotType = document.getElementById('dotStyle').value;

  let generated = 0;
  inputs.forEach((input, i) => {
    const val = input.value.trim();
    if (!val) return;

    const tempDiv = document.createElement('div');
    tempDiv.style.display = 'none';
    document.body.appendChild(tempDiv);

    const qr = new QRCodeStyling({
      width: currentSize,
      height: currentSize,
      type: 'canvas',
      data: val,
      dotsOptions: { color: fgColor, type: dotType },
      backgroundOptions: { color: bgColor },
      cornersSquareOptions: { color: fgColor, type: 'extra-rounded' },
      cornersDotOptions: { color: fgColor, type: 'dot' },
      qrOptions: { errorCorrectionLevel: ecl }
    });

    qr.append(tempDiv);

    setTimeout(() => {
      qr.download({ name: `qrforge-batch-${i + 1}`, extension: 'png' });
      document.body.removeChild(tempDiv);
    }, 600);

    generated++;
  });

  if (generated > 0) {
    toast(`${generated} QR code(s) generated and downloading`);
  } else {
    toast('Enter at least one value to generate');
  }
}

// History
function saveToHistory(data, imageData) {
  try {
    let history = JSON.parse(localStorage.getItem(HISTORY_KEY) || '[]');
    // Avoid duplicates at top
    history = history.filter(h => h.data !== data);
    history.unshift({
      data: data,
      type: currentType,
      image: imageData,
      timestamp: Date.now()
    });
    // Keep last 20
    history = history.slice(0, 20);
    localStorage.setItem(HISTORY_KEY, JSON.stringify(history));
    loadHistory();
  } catch (e) {
    // localStorage might be full, silently fail
  }
}

function loadHistory() {
  const container = document.getElementById('historyList');
  let history;
  try {
    history = JSON.parse(localStorage.getItem(HISTORY_KEY) || '[]');
  } catch { history = []; }

  if (!history.length) {
    container.innerHTML = '<div class="history-empty">No QR codes generated yet.</div>';
    return;
  }

  container.innerHTML = history.slice(0, 8).map((item, i) => {
    const label = item.type.toUpperCase();
    const shortData = item.data.length > 40 ? item.data.substring(0, 40) + '...' : item.data;
    const time = new Date(item.timestamp).toLocaleString();
    return `<div class="history-item" onclick="restoreHistory(${i})">
      <div class="history-item-preview"><img src="${item.image}" alt="QR"></div>
      <div class="history-item-info">
        <div class="label">${label} &middot; ${time}</div>
        <div class="value">${escapeHtml(shortData)}</div>
      </div>
      <div class="history-item-actions">
        <button class="history-delete" onclick="event.stopPropagation();deleteHistory(${i})" title="Delete">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
        </button>
      </div>
    </div>`;
  }).join('');
}

function restoreHistory(index) {
  let history;
  try { history = JSON.parse(localStorage.getItem(HISTORY_KEY) || '[]'); } catch { return; }
  const item = history[index];
  if (!item) return;

  setType(item.type);

  setTimeout(() => {
    if (item.type === 'url' || item.type === 'text' || item.type === 'phone') {
      const input = document.getElementById('qrInput');
      if (input) {
        let val = item.data;
        if (item.type === 'phone') val = val.replace('tel:', '');
        input.value = val;
      }
    }
    generateQR();
  }, 100);
}

function deleteHistory(index) {
  let history;
  try { history = JSON.parse(localStorage.getItem(HISTORY_KEY) || '[]'); } catch { return; }
  history.splice(index, 1);
  localStorage.setItem(HISTORY_KEY, JSON.stringify(history));
  loadHistory();
  toast('QR code removed from history');
}

function escapeHtml(text) {
  const d = document.createElement('div');
  d.textContent = text;
  return d.innerHTML;
}

// Pro Modal
function showProModal(type) {
  const modal = document.getElementById('proModal');
  const title = document.getElementById('modalTitle');
  const desc = document.getElementById('modalDesc');
  const price = document.getElementById('modalPrice');
  const features = document.getElementById('modalFeatures');
  const icon = document.getElementById('modalIcon');

  const configs = {
    general: {
      icon: '&#9733;',
      title: 'Upgrade to QRForge Pro',
      desc: 'Unlock the full power of QRForge with premium features.',
      price: '$4.99',
      features: ['Unlimited batch QR generation', 'Embed custom logos and images', 'No watermark on downloads', 'Priority support', 'Advanced dot styles']
    },
    batch: {
      icon: '&#128230;',
      title: 'Unlimited Batch Generation',
      desc: 'Generate as many QR codes as you need, all at once.',
      price: '$4.99',
      features: ['Unlimited batch items', 'Bulk download as ZIP', 'CSV import support', 'Custom naming patterns', 'No daily limits']
    },
    logo: {
      icon: '&#127912;',
      title: 'Logo & Image Embedding',
      desc: 'Make your QR codes stand out with custom logos.',
      price: '$4.99',
      features: ['Upload custom logos', 'Auto-resize and position', 'Maintain scan reliability', 'Support PNG, JPG, SVG', 'Brand consistency']
    },
    tracking: {
      icon: '&#128200;',
      title: 'Scan Analytics & Tracking',
      desc: 'Track every scan with detailed analytics.',
      price: '$9.99',
      features: ['Real-time scan tracking', 'Geographic data', 'Device & browser stats', 'Scan timeline charts', 'Export analytics data']
    }
  };

  const c = configs[type] || configs.general;
  icon.innerHTML = c.icon;
  title.textContent = c.title;
  desc.textContent = c.desc;
  price.innerHTML = `${c.price} <span>/month</span>`;
  features.innerHTML = c.features.map(f => `<li>${f}</li>`).join('');

  modal.classList.add('active');
}

function closeModal() {
  document.getElementById('proModal').classList.remove('active');
}

// Toast
function toast(msg) {
  const existing = document.querySelectorAll('.toast');
  existing.forEach(e => e.remove());
  const t = document.createElement('div');
  t.className = 'toast';
  t.innerHTML = `<svg viewBox="0 0 24 24" fill="none" stroke="var(--green)" stroke-width="2" width="16" height="16"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> ${msg}`;
  document.body.appendChild(t);
  setTimeout(() => t.remove(), 3000);
}
</script>

</body>
</html>
